;*********************************;**                             **;**     COMMODORE ASSEMBLER     **;**                             **;** COPYRIGHT 1978 BY COMMODORE **;**      BUSINESS MACHINES      **;**                             **;** UNASSEMBLED,  COMMENTED AND **;** MODIFIED  BY  JOHN MCCARTHY **;**                             **;**  PART 2                     **;**                             **;*********************************;Z0DE0 LDA Z0866 BNE Z0E0DZ0DE5 LDA #$02 LDY #$03 LDX Z0861 JMP ERROR;Z0DEF LDA Z0863 BEQ Z0DFDZ0DF4 LDA #3 TAY  LDX CURCHR JMP ERROR;Z0DFD INC Z0863 LDA PC+1 STA NUM LDA PC STA NUM+1 JSR Z1ACCZ0E0D LDA Z0877 CMP Z086E BCS Z0E18 JMP Z15C4;Z0E18 JMP Z0D0F;Z0E1B LDA #$FF STA Z0864 INC Z086E STX Z0861 JSR Z15D1 BCS Z0E2ENEQSGN JMP Z159C;Z0E2E LDA Z0880,X CMP #"=" BNE NEQSGNZ0E35 INC Z086E LDA Z086E CMP Z0877 BEQ Z0E45 BCC Z0E45 JMP Z159C;Z0E45 JSR Z15D1 BCS Z0E54 LDX Z086A LDA #$07 LDY #$00 JMP ERROR;Z0E54 JSR Z16BC DEC Z0857 BMI Z0E6C BNE Z0E65 LDA #$11 LDY #$03 JMP ERROR;Z0E65 LDA #$13 LDY #$03 JMP ERROR;Z0E6C LDA Z0864 BEQ Z0E9F LDA #1 AND Z0875 BEQ Z0E8B LDX #0 STX PC STX PC+1 LDX CURCHR LDA #$21 LDY #$FF JSR Z1B68 JMP Z15CB;Z0E8B LDX #0 TXA  TAY  JSR Z1B68 LDA Z086C STA PC+1 LDA Z086C+1 STA PC JMP Z15CB;Z0E9F PLA  STA Z086B LDX #5Z0EA5 PLA  STA Z0907+1,X DEX  BPL Z0EA5 JSR Z19F8 BCC Z0ECB LDA NUM CMP Z086C BNE Z0EC1 LDA NUM+1 CMP Z086C+1 BEQ Z0EDAZ0EC1 LDX Z0861 LDA #$02 LDY #$00 JMP ERROR;Z0ECB LDA Z086C STA NUM LDA Z086C+1 STA NUM+1 JSR Z1ACCZ0EDA JMP Z15C4;Z0EDD LDA #$14 STA Z0871 LDX CURCHR INX  LDA #$45 STA Z08 LDA #$20 STA Z09 LDA #3 STA Z0856 JSR Z168FZ0EF6 CPX Z0877 BEQ Z0EFD BCS NSPZ0EFD LDA Z0880,X CMP #" " BEQ NSP INX  JMP Z0EF6;NSP STX Z086E LDA #0 STA Z085A BCS Z0F15 JMP Z15A1;Z0F15 LDX #$19Z0F17 LDY #2Z0F19 LDA Z0907+1,Y CMP (Z08),Y BNE NXTDOT DEY  BPL Z0F19; TXA  ASL A TAX  LDA DOTVEC,X STA Z08 LDA DOTVEC+1,X STA Z09 LDA Z0874 JMP (Z08);NXTDOT LDA Z08 CLC  ADC #3 STA Z08 BCC NHIG INC Z09NHIG DEX  BPL Z0F17; JMP Z15A1; LDA #1 .BYTE SKIP2 LDA #3 .BYTE SKIP2 LDA #2 STA Z0865 LDY #$00 STY Z085A TAY  CPY #$03 BNE Z0F5D DEY Z0F5D STY Z087A JSR Z15D1 BCS Z0F6D LDX Z086A LDA #7 JMP ERROR;Z0F6D STY Z087AZ0F70 LDX CURCHR JSR Z16BC DEC Z0857 BMI Z0FB0 BEQ Z0F80 JMP Z102B;Z0F80 LDA #1 STA Z0871Z0F85 CMP #1 BNE Z0F92 LDY Z0865 STY Z087A JMP Z0F95;Z0F92 LDY Z087AZ0F95 LDA Z0871 LDX CURCHR JSR Z1B68 LDY #0 STY Z085A LDY Z087A CPY #3 BNE NOTIT DEC Z087A JMP NOTIT;Z0FB0 LDA #4 STA Z0871 LDX Z0865 CPX #3 BNE Z0FC8 LDA Z086C LDY Z085A JSR Z2890 INC Z085AZ0FC8 LDA Z086C+1 LDY Z085A JSR Z2890 INC Z085A LDX Z0865 CPX #2 BNE Z0FE7 LDA Z086C LDY Z085A JSR Z2890 INC Z085AZ0FE7 LDA Z0875 AND #%00001001 BNE Z0F85 CPX #1 BNE Z0FF7 LDA Z086C BNE Z0F85Z0FF7 LDA #0 TAX  LDY Z087A STA Z085A JSR Z1B68NOTIT JSR Z1635 BCS Z100B JMP Z15CB;Z100B LDA Z0880,X INX  STX Z086E CPX Z0877 BEQ CHKCOM BCC CHKCOM JMP Z159C;CHKCOM CMP #"," BNE NOTIT JSR Z15D1 BCS Z1028 JMP Z159C;Z1028 JMP Z0F70;Z102B LDA Z0880,X CMP #"'" BEQ GOTQUZ1032 LDA #$13 LDY Z087B JSR Z1B68 LDY #0 STY Z085A JMP NOTIT;GOTQU CPX CURCHR BNE Z1032 LDY Z0865 CPY #2 BCS Z1032 STX Z086E LDY #0Z1053 INC Z086E LDX Z086E CPX Z0877 BEQ Z1060 BCS Z10A5Z1060 LDA Z0880,X CMP #"'" BNE NOQU INC Z086E LDX Z086E CPX Z0877 BEQ Z1074 BCS EXTQUZ1074 LDA Z0880,X CMP #"'" BNE EXTQUNOQU PHA  AND #%01111111 CMP #" " BCC CNTRL CMP #$60 BCC Z108ACNTRL PLA  LDA #0 PHA Z108A PLA  LDY Z085A JSR Z2890 INC Z085A BNE Z1053EXTQU LDY Z085A LDA #$00 STA Z085A TAX  JSR Z1B68 JMP NOTIT;Z10A5 LDY Z085A LDA #7 JMP ERROR;DOCOU JSR Z15D1 BCS Z10B5 JMP Z15C4;Z10B5 LDX CURCHR LDA #3 STA Z0856 JSR Z168F BCS Z10C5 JMP Z15A1;Z10C5 LDA #$6C STA Z08 LDA #$20 STA Z09 LDX #$0C JMP Z0F17;Z10D2 AND #%01111111 .SKIP2Z10D5 ORA #%10000000 .SKIP2Z10D8 ORA #%01000000 .SKIP2Z10DB AND #%10111111 .SKIP2Z10DE AND #%11011111 .SKIP2Z10E1 ORA #%00100000 .SKIP2Z10E4 ORA #$00010000 .SKIP2Z10E7 AND #%11101111 .SKIP2Z10EA ORA #%00001000 .SKIP2Z10ED AND #%11110111 .SKIP2Z10F0 ORA #%00000100 .SKIP2Z10F3 AND #%11111011 STA Z0874 JSR Z1635 BCS Z1100 JMP Z15CB;Z1100 LDA Z0880,X CMP #$2C BEQ Z110A JMP Z15CB;Z110A INX  STX Z086E JMP DOCOU; JSR Z15D1 BCS Z1119 LDX Z085AZ1119 LDA #$CC LDY #$00 JMP ERROR; JSR Z15D1 BCC Z112C LDA Z0880,X CMP #"'" BEQ QUTUZ112C LDX #$00QUTU LDA #$CB LDY #$00 JMP ERROR;DOERR BIT Z087F BVS Z115C LDX #$FF TXS  LDX Z0866 BEQ Z1151 LDA #2 JSR ZFFC1 ; SAY WHAT? LDX #0 TXA  TAY  JSR Z1B68 JMP Z1D6E;Z1151 INC Z0866 LDA #2 JSR CLOSE JMP OPNCRS;Z115C LDA #$03 JSR CLOSE LDA Z087F AND #$BF STA Z087FZ1169 LDX #$00 STX OUTFIL LDY #$00 LDA #$CD INC Z0872 JSR Z1B68 DEC Z0872 LDA #$0D STA Z084B JMP Z15CB; BIT Z087F ; HOW DOES IT GET HERE BVC Z1190 LDA #3 JSR ZFFC1 ; SAY WHAT? JMP Z1202;Z1190 LDA #2 JSR CLOSE JSR DOTFIL LDA #$02 TAY  LDX #8 JSR SETLFS JSR OPEN JSR CHKST JMP Z1169;DOTFIL JSR Z15D1 BCC Z11D2 LDY #0SETFIL LDA Z0880,X CMP #" " BEQ SPCE STA Z0907+1,Y CPX Z0877 BEQ SPCE INY  INX  CPY #16+2 BNE SETFIL; BEQ Z11D2;SPCE LDA #13 INY  STY Z084C STA Z084B BNE Z11DCZ11D2 LDA #>Z2323 LDY #<Z2323 JSR STRING JMP Z27AD;Z11DC LDX Z084C LDA #"," STA Z0907+1,X INX  LDA #"S" STA Z0907+1,X INX  TXA  LDY #9 LDX #8 JMP SETNAM; BIT Z087F ; HOW DOES IT GET HERE BVC Z1202 LDA #>Z2334 LDY #<Z2334 JSR STRING JMP Z27AD;Z1202 JSR DOTFIL LDA #$03 TAY  LDX #$08 JSR SETLFS JSR OPEN JSR CHKST LDA #$40 ORA Z087F STA Z087F JMP Z1169; LDA #$FF BIT ZA9 STA Z0975 JSR Z15D1 BCC Z1282 STY Z087A LDX CURCHR JSR Z16BC DEC Z0857 BMI Z123E BEQ Z1277 JMP Z1285;Z123E STX Z086E JSR Z15D1 BCC Z1282 CMP #"<" BEQ Z124D JMP Z1282;Z124D LDY #$FF LDA Z086C ORA Z086C+1 BEQ Z1259 LDY #0Z1259 TYA  EOR Z0975 BNE Z1274Z125F JSR Z128F CMP #13 BNE Z125F JSR Z128F CMP #">" BNE Z125FZ126D JSR Z128F CMP #13 BNE Z126DZ1274 JMP Z15CB;Z1277 LDA Z0866 BNE Z127F LDA #11 .BYTE SKIP2Z127F LDA #1 .BYTE SKIP2Z1282 LDA #7 .BYTE SKIP2Z1285 LDA #13 LDX Z086A LDY #0 JMP ERROR;Z128F JSR Z265F CMP #0 BEQ Z1297 RTS ;Z1297 JMP DOERR;Z129A LDY #0 STY Z085D STY Z0870 STY Z085E LDA Z0852 CMP #$14 BNE Z12BCZ12AC LDY #$00 LDA Z0851 JSR Z2890 LDX #0 LDY #1 TXA  JMP ERROR;Z12BC CMP #$15 BNE Z12CA LDA #$0E STA Z0852 LDA #$07 STA Z0871Z12CA LDA Z086A STA Z086E INC Z086E JSR Z15D1 BCS Z12E0 LDA #$18 STA Z0871 JMP Z159C;Z12E0 LDA Z0880,X CMP #";" BNE CHKACC JMP Z15A1;CHKACC CMP #"A" BNE NSPC CPX Z0877 BEQ ITSSPC LDY Z0880+1,X CPY #" " BNE NSPCITSSPC LDY Z0852 LDA Z2149,Y BMI Z130C CLC  ADC Z0851 STA Z0851 JMP Z12AC;Z130C LDX CURCHR LDY #$03 LDA #$05 JMP ERROR;NSPC CMP #"#" BNE CHKBRA LDA #10 JMP OPNBRA;CHKBRA CMP #"(" BNE Z1336 LDA #5OPNBRA STA Z085D INX  INC CURCHR CPX Z0877 BEQ Z1336 BCC Z1336 JMP Z159C;Z1336 JSR Z16BC STX Z0860 LDA #$13 STA Z0871 DEC Z0857 BMI Z139E BEQ Z1396 LDA Z085D CMP #10 BEQ Z1352 JMP Z15AD;Z1352 LDA Z0880,X CMP #"'" BEQ Z135C JMP Z15A7;Z135C TXA  TAY  INX  CPX Z0877 BEQ Z1369 BCC Z1369 JMP Z159C;Z1369 LDA Z0880,X CMP #" " BCC Z1374 CMP #$60 BCC OKNCZ1374 LDA #0OKNC STA Z086C+1 INX  CPX Z0877 BEQ Z1381 BCS Z139EZ1381 LDA Z0880,X CMP #" " BEQ Z139E CMP #"'" BEQ Z139E TYA  TAX  LDY #3 LDA Z0871 JMP ERROR;Z1396 INC Z085E LDA #2 STA Z0870Z139E JSR Z1635 BCC Z13FB LDA Z0880,X CMP #")" BNE BRAOUT INC Z085D INC Z085D LDA Z0851 CMP #$4C BEQ Z1402 INX  CPX Z0877 BEQ BRAOUT BCC BRAOUT JMP Z159C;BRAOUT LDA Z0880,X CMP #"," BNE Z13DB LDA Z0851 CMP #$4C BEQ MISPC INX  CPX Z0877 BEQ Z13DB BCC Z13DB JMP Z159C;Z13DB LDA Z0880,X CMP #"X" BNE Z13E8 INC Z085D JMP Z1434;Z13E8 CMP #"Y" BEQ Z13F3 LDY #$03 LDA #$12 JMP ERROR;Z13F3 INC Z085D INC Z085D BNE Z1434Z13FB LDA Z0851 CMP #$4C BNE Z1434Z1402 LDA Z085D BEQ SPAK CMP #7 BEQ Z1413MISPC LDA #$18 STA Z0871 JMP Z15A7;Z1413 INX CPX Z0877 BMI Z141B BCS SPAKZ141B LDA Z0880,X CMP #" " BNE MISPCSPAK LDA Z085D BNE NOXE JMP Z142C;NOXE LDA #$20Z142C LDY #$02 STY Z0870 JMP Z1532; .END