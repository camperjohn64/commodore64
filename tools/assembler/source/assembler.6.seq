;*********************************;**                             **;**     COMMODORE ASSEMBLER     **;**                             **;** COPYRIGHT 1978 BY COMMODORE **;**      BUSINESS MACHINES      **;**                             **;** UNASSEMBLED,  COMMENTED AND **;** MODIFIED  BY  JOHN MCCARTHY **;**                             **;**  PART 6                     **;**                             **;*********************************;Z265F STY Z04 STX Z05Z2663 LDA Z087F AND #$10 BEQ Z266D JMP Z2711;Z266D LDA Z087F AND #$20 BNE Z26BB BIT Z087F BVS Z26AC LDX #2 CPX OUTFIL BEQ Z268B JSR CLRCHN LDX #2Z2685 STX OUTFIL JSR CHKINZ268B JSR INPUT LDX ST BEQ Z26A7 TAY  TXA  AND #$40 BNE Z26A1 JSR CLRCHN JSR CHKST JMP Z27AD;Z26A1 LDA #0 STA Z084B TYA Z26A7 LDY Z04 LDX Z05 RTS ;Z26AC LDX #3 CPX OUTFIL BEQ Z268B JSR CLRCHN LDX #3 JMP Z2685;Z26BB JSR Z2734 BNE Z26C6 JSR Z2D40 JMP Z2663;Z26C6 CMP #$3FZ26C8 BNE Z26A7 JSR Z2734 SEC  SBC #$30 JSR Z2CCE LDY #0 LDA (Z10),Y STA Z098D INY  LDA (Z10),Y STA Z098E ORA Z098D BNE Z2709 LDA Z10 STA Z097A LDA Z11 STA Z097B JSR Z274B LDA Z097A STA Z10 LDA Z097B STA Z11 LDY #0 LDA Z098D STA (Z10),Y INY  LDA Z098E STA (Z10),YZ2709 LDA Z087F ORA #$10 STA Z087FZ2711 LDA Z098D STA Z10 LDA Z098E STA Z11 INC Z098D BNE Z2723 INC Z098EZ2723 LDY #0 LDA (Z10),Y BNE Z26C8 LDA Z087F AND #$EF STA Z087F JMP Z2663;Z2734 LDA Z0987 STA Z10 LDA Z0988 STA Z11 INC Z0987 BNE Z2746 INC Z0988Z2746 LDY #0 LDA (Z10),Y RTS ;Z274B LDX #3Z274D INC Z0989,X LDA Z0989,X CMP #$3A BNE Z275F LDA #$30 STA Z0989,X DEX  BNE Z274DZ275F LDA Z0978 STA Z098D LDA Z0979 STA Z098E LDY #0Z276D LDA Z0989,Y JSR Z29F1 INY  CPY #4 BCC Z276D LDA #0 JSR Z29F1 RTS ;Z277E LDA #13Z2780 STX Z05 STY Z04 PHA  BIT HRDCOP BPL Z27A6 LDA OUTFIL CMP #4 BEQ Z279C JSR CLRCHN LDX #4 STX OUTFIL JSR CHKOUTZ279C PLA  PHA  JSR CHROUT LDX Z0872 BEQ Z27A9Z27A6 JSR TOSCRNZ27A9 PLA  JMP Z26A7;Z27AD JSR CLRCHN LDA #1 JSR CLOSE LDA #4 JSR CLOSE LDA #5 JSR CLOSE LDA Z0974 BNE Z27CC JSR Z2991 LDA #6 JSR CLOSEZ27CC LDA #7 JSR CLOSE JSR CLRCHN JMP Z2871;Z27D7 JSR TSTSTP BEQ Z27DD RTS ;Z27DD JSR BLKVIC SEI  JSR CLRCHN LDA #0 STA OUTFIL STA KEYLEN CLI Z27EC JSR GETCHR ORA #0 BEQ Z27EC CMP #$42 BEQ Z27FB JSR DPLVIC RTS ;Z27FB JMP Z27AD;CHKST JSR CLRCHN LDX #7 STX OUTFIL JSR CHKIN JSR INPUT STA Z12 JSR INPUT STA Z13 CMP #$30 BNE Z2825 LDA Z12 CMP #$30 BNE Z2825Z281D JSR INPUT CMP #13 BNE Z281D RTS ;Z2825 LDX #1Z2827 LDA Z12,X STA Z08D0,X DEX  BPL Z2827 LDY #2Z2831 STY Z04 JSR INPUT CMP #13 BEQ Z2842 LDY Z04 STA Z08D0,Y INY  BNE Z2831Z2842 LDA #$8D STA Z08D0,Y LDA #8 LDY #$D0 JSR STRING LDY ZB7 LDA #$8D STA (FILPNT),Y LDA FILPNT+1 LDY FILPNT JSR STRING JMP Z2871;Z285E STX Z05Z2860 LDX Z05 LDA Z228C,X PHP  AND #$7F JSR Z2780 INC Z05 PLP  BPL Z2860 RTS ;Z2871 JSR BLKVIC JSR Z2885 JMP ZE386;Z287A LDX #$1EZ287C LDA Z02,X STA Z081A,X DEX  BPL Z287C RTS ;Z2885 LDX #$1EZ2887 LDA Z081A,X STA Z02,X DEX  BPL Z2887 RTS ;Z2890 STX Z05 JSR Z2898 LDX Z05 RTS ;Z2898 PHA  STA Z0918,Y LDA Z0974 BNE Z28A6 LDA Z0866 BNE Z28A8Z28A6 PLA Z28A7 RTS ;Z28A8 LDA Z0874 AND #8 BEQ Z28A6 TYA  CLC  ADC PC EOR Z0942 BNE Z28BF ADC PC+1 CMP Z0943 BEQ Z28CAZ28BF LDA Z0946 BEQ Z28C7 JSR Z2928Z28C7 JSR Z28FAZ28CA LDX Z0946 PLA  STA Z0949,X INC Z0946 CLC  ADC Z0940 STA Z0940 BCC Z28E0 INC Z0941Z28E0 INC Z0942 BNE Z28E8 INC Z0943Z28E8 CPX #$17 BCC Z28A7 JSR Z2928 JMP Z2904;Z28F2 LDA #0 STA Z0944 STA Z0945Z28FA LDA PC STA Z0942 LDA PC+1 STA Z0943Z2904 LDA #0 STA Z0946 STA Z0941 LDA Z0942 STA Z0948 STA Z0940; LDA Z0943 STA Z0947 CLC ADC Z0940 STA Z0940 BCC Z2927 INC Z0941Z2927 RTS; .END