;*********************************;**                             **;**     COMMODORE ASSEMBLER     **;**                             **;** COPYRIGHT 1978 BY COMMODORE **;**      BUSINESS MACHINES      **;**                             **;** UNASSEMBLED,  COMMENTED AND **;** MODIFIED  BY  JOHN MCCARTHY **;**                             **;**  PART 3                     **;**                             **;*********************************;Z1434 LDA Z085E BEQ Z143C JMP Z14D1;Z143C LDA Z0852 CMP #14 BNE Z148A CLC  LDA PC ADC #2 STA Z087B+1 LDA PC+1 ADC #0 STA Z087B LDA Z086C+1 SEC  SBC Z087B+1 STA Z086C+1 TAY  LDA Z086C SBC Z087B STA Z086C BPL Z146D TYA  BMI Z1475 BPL Z1470;Z146D TYA  BPL Z1475Z1470 LDA #$17 STA Z0871Z1475 LDA Z086C BEQ Z14AD CMP #$FF BEQ Z1483 LDA #$17 STA Z0871Z1483 LDA #0 STA Z086C BEQ Z14ADZ148A LDA Z085D CMP #6 BCC Z14AD CMP #9 BEQ Z1497 BCS Z14ADZ1497 LDA Z086C BNE Z14A3 LDA Z086C+1 CMP #$FF BNE Z14ADZ14A3 LDA #$19 STA Z0871 LDA #0 STA Z086CZ14AD LDA #2 STA Z0870 LDA Z086C BNE Z14D1 LDA #1 STA Z0870 LDA Z085D CLC  ADC #2 STA Z085DZ14C5 CMP #13 BCC Z14E0 LDA #$15 STA Z0871 JMP Z15A1;Z14D1 LDA Z085D CLC  ADC #13 STA Z085DZ14DA CMP #15 BEQ Z14E0 BCS Z14EFZ14E0 TAY  DEY  LDA Z213B,Y CLC  ADC Z0852 TAY  LDA Z214A,Y BPL Z1532Z14EF LDA Z085E BEQ Z1514 LDA Z0870 CMP #2 BEQ Z1503 LDA #$18 STA Z0871 JMP Z15A1;Z1503 LDA #1 STA Z0870 LDA Z085D SEC  SBC #11 STA Z085D JMP Z14C5;Z1514 LDA Z0870 CMP #1 BEQ Z1523 LDA #$18 STA Z0871 JMP Z15A1;Z1523 INC Z0870 LDA Z085D CLC  ADC #11 STA Z085D JMP Z14DA;Z1532 CLC  ADC Z0851 LDY #0 JSR Z2890 LDA Z085E BNE Z157F LDY #1 LDA Z086C+1 JSR Z2890 LDY #2 LDA Z0870 CMP #1 BEQ Z1557 LDA Z086C JSR Z2890Z1557 LDA Z0871 CMP #$17 BEQ Z1594 CMP #$19 BEQ Z15A7 LDA #9 AND Z0875 BNE Z15B8 LDA Z0870 CMP #1 BNE Z1575 LDA Z086C BNE Z15B8Z1575 LDX #0 LDY Z0870 INY TXA  JMP ERROR;Z157F LDY Z0870 LDA Z0852 CMP #14 BNE Z158B LDY #1Z158B LDX CURCHR INY  LDA #1 JMP ERROR;Z1594 LDX CURCHR LDY #2 JMP ERROR;Z159C LDA #7 STA Z0871Z15A1 LDX CURCHR JMP Z15B0;Z15A7 LDX Z086E JMP Z15B0;Z15AD LDX Z0860Z15B0 LDY #3 LDA Z0871 JMP ERROR;Z15B8 LDX CURCHR LDY Z0870 INY  LDA #4 JMP ERROR;Z15C4 LDX #0 TXA  TAY ERROR JSR Z1B68Z15CB LDX #$FF TXS  JMP Z0CAF;Z15D1 LDA Z0877 CMP #$FF BEQ EROR LDX Z086EZ15DB CPX Z0877 BEQ Z15E2 BCS ERORZ15E2 LDA Z0880,X CMP #" " BEQ SPEQ STX CURCHR BNE IGSTUF;SPEQ INX  STX Z086E JMP Z15DB;Z15F5 LDY #0 STY Z086B LDX Z086EZ15FD CPX Z0877 BEQ TSLIN BCS Z161DTSLIN LDA Z0880,X CMP #" " BEQ IGTHIS CMP #">" BEQ IGTHIS CMP #";" BNE NGCOMIGTHIS CPY #0 BNE NQTPZ1617 DEX  STX Z086AIGSTUF SEC  RTS ;Z161D CPY #0 BEQ Z1617EROR CLC  RTS ;NGCOM CMP #"'" BNE NQTP INY  CPY #2 BNE NQTP LDY #0NQTP INX  INC Z086B JMP Z15FD;Z1635 LDX Z086EZ1638 CPX Z0877 BEQ Z163F BCS ERORZ163F LDA Z0880,X CMP #"'" BNE CHKOTRDOQU INX  STX Z086E CPX Z0877 BEQ Z1651 BCS ERORZ1651 LDA Z0880,X CMP #"'" BNE DOQU; INX  STX Z086E JMP Z1638;CHKOTR LDA Z0880,X CMP #" " BEQ EROR CMP #")" BEQ IGSTUF CMP #"," BEQ IGSTUF INX  STX Z086E JMP Z1638;LABA2Z LDA Z0880,X CMP #"A" BCC EROR CMP #91 ; CHECK FOR >"Z" BCC IGSTUF BCS EROR;CHKNUM LDA Z0880,X CMP #"0" BCC EROR CMP #":" BCC IGSTUF BCS EROR;Z168F LDY #$FFZ1691 INY  CPY #5 BEQ Z1698 BCS Z16AAZ1698 CPY Z0856 BCC Z169F BCS PUTSPCZ169F JSR LABA2Z BCS Z16AC JSR CHKNUM BCS Z16AC RTS ;Z16AA SEC  RTS ;Z16AC LDA Z0880,X STA Z0907+1,Y INX  BNE Z1691PUTSPC LDA #" " STA Z0907+1,Y BNE Z1691;Z16BC LDA #0 STA Z086C STA Z086C+1 LDA #%11111100 AND Z0875 STA Z0875 CPX Z0877 BEQ GETNUM BCC GETNUMZ16D3 JMP NODIV;GETNUM JSR Z1924 BCS Z16D3 LDY #"+" ; ASSUME POSITIVE CMP #"-" ;...BUT CHECK FOR NEGITIVE BNE ASMPOS LDY #"-" ;**** TAY INX ASMPOS STY Z0855 CPX Z0877 BEQ Z16EE BCS Z16D3Z16EE LDA #0 STA Z0878 STA Z0879 JSR Z1924 BCS Z16D3 CMP #"<" BNE WDGIN INC Z0878 JMP Z170C;WDGIN CMP #">" BNE NWDGIN INC Z0879Z170C INX  CPX Z0877 BEQ NWDGIN BCS Z16D3NWDGIN JSR CHKNUM BCC CHKHEX LDY #10 JMP Z17A0;CHKHEX CMP #"$" BNE Z1727 LDY #16 JMP DOBASE;Z1727 CMP #"@" BNE CHKBIN LDY #8 JMP DOBASE;CHKBIN CMP #"%" BNE ASMLAB LDY #2 BNE DOBASE;ASMLAB JSR LABA2Z BCC Z177C TXA  TAY Z173F INX  CPX Z0877 BEQ Z1747 BCS Z1751Z1747 JSR CHKNUM BCS Z173F JSR LABA2Z BCS Z173FZ1751 STY Z087B TXA  SEC  SBC Z087B CMP #7 BCC Z1760Z175D JMP NODIV;Z1760 STA Z0856 LDX Z087B JSR Z168F BCC Z175D STX Z087B+1 JSR Z19F8 LDX Z087B+1 BCS Z17CC LDX Z087B JMP Z191B;Z177C CMP #"*" BNE Z175D LDA PC STA NUM+1 LDA PC+1 STA NUM INX  JMP Z17CC;DOBASE INX  CPX Z0877 BEQ Z1796 BCS Z175DZ1796 JSR CHKNUM BCS Z17A0 JSR LABA2Z BCC Z175DZ17A0 STY Z0857+1 TXA  TAY Z17A5 INX  CPX Z0877 BEQ Z17AD BPL Z17B7Z17AD JSR CHKNUM BCS Z17A5 JSR LABA2Z BCS Z17A5Z17B7 STY Z087B TXA  SEC  SBC Z087B STA Z0856 TYA  TAX  JSR Z1939 BCS Z17CC JMP NODIV;Z17CC LDA Z0878 BEQ Z17D8 LDA #0 STA NUM BEQ Z17E8;Z17D8 LDA Z0879 BEQ Z17E8 LDA NUM STA NUM+1 LDA #0 STA NUMZ17E8 LDA Z0855 CMP #"+" BNE Z183F LDA Z086C+1 CLC  ADC NUM+1 STA Z086C+1 LDA Z086C ADC NUM STA Z086C LDA #0 ROL A TAY  LDA #1 AND Z0875 ASL A STA Z087B LDA #2 AND Z0875 EOR Z087B BNE Z1826 TYA  BEQ Z1831 LDA #8 ORA Z0875 STA Z0875 BNE Z1831Z1826 TYA  BEQ Z1834 LDA #%11111110 AND Z0875 STA Z0875Z1831 JMP Z189B;Z1834 LDA #1 ORA Z0875 STA Z0875 JMP Z189B;Z183F CMP #"+" BNE NPLUS LDA Z086C+1 SEC  SBC NUM+1 STA Z086C+1 LDA Z086C SBC NUM STA Z086C LDA #0 ROL A TAY  LDA #1 AND Z0875 ASL A STA Z087B LDA #2 AND Z0875 EOR Z087B BNE Z1886 TYA  BEQ Z187B LDA #%11111110 AND Z0875 STA Z0875 JMP Z189B;Z187B LDA #1 ORA Z0875 STA Z0875 JMP Z189B;Z1886 STY Z087B LDA #1 AND Z0875 EOR Z087B BEQ Z189B LDA #8 ORA Z0875 STA Z0875Z189B CPX Z0877 BEQ Z18A2 BPL Z1918Z18A2 JSR Z1924 BCS Z1918 LDY Z0880,X INX  JMP ASMPOS;NPLUS PHA  LDA #0 STA Z087B STA Z087B+1 PLA  CMP #"*" BNE NMULDOMULT ASL Z087B+1 ROL Z087B LSR NUM ROR NUM+1 BCC Z18DD CLC  LDA Z087B+1 ADC Z086C+1 STA Z087B+1 LDA Z087B ADC Z086C STA Z087BZ18DD LDA NUM ORA NUM+1 BNE DOMULTZ18E5 LDA Z087B STA Z086C LDA Z087B+1 STA Z086C+1 JMP Z189B;NMUL CMP #"/" BNE NODIVDODIV LDA Z086C+1 SEC  SBC NUM+1 STA Z086C+1 LDA Z086C SBC NUM STA Z086C BCC Z18E5 INC Z087B+1 BNE DODIV INC Z087B JMP DODIV;Z1918 LDA #0 .BYTE SKIP2Z191B LDA #1 .BYTE SKIP2NODIV LDA #2 STA Z0857 RTS ;Z1924 LDA Z0880,X CMP #" " BEQ OKCHAR CMP #"," BEQ OKCHAR CMP #")" BEQ OKCHAR CMP #";" BEQ OKCHAR CLC OKCHAR RTS ;Z1939 LDA #0 STA NUM STA NUM+1Z1941 LDA Z0880,X JSR CHKNUM BCC Z194E SBC #$30 JMP Z1955;Z194E JSR LABA2Z BCC Z195A SBC #$37Z1955 CMP Z0857+1 BCC Z195CZ195A CLC  RTS ;Z195C STA Z0876 TXA  PHA  LDY Z0857+1 CPY #2 BNE Z196C LDX #1 BNE Z198E;Z196C CPY #8 BNE Z1974 LDX #3 BNE Z198E;Z1974 CPY #16 BNE Z197C LDX #4 BNE Z198E;Z197C CPY #10 BNE Z195A LDA NUM STA Z087B LDA NUM+1 STA Z087B+1 LDX #3Z198E ASL NUM+1 ROL NUM BCC Z199E LDA Z0875 ORA #8 STA Z0875Z199E DEX  BNE Z198E CPY #10 BNE Z19D2 ASL Z087B+1 ROL Z087B BCC Z19B5 LDA Z0875 ORA #8 STA Z0875Z19B5 LDA NUM+1 CLC  ADC Z087B+1 STA NUM+1 LDA NUM ADC Z087B STA NUM BCC Z19D2 LDA Z0875 ORA #8 STA Z0875Z19D2 LDA Z0876 CLC  ADC NUM+1 STA NUM+1 BCC Z19EB INC NUM BNE Z19EB LDA Z0875 ORA #8 STA Z0875Z19EB PLA  TAX  INX  DEC Z0856 BEQ Z19F6 JMP Z1941;Z19F6 SEC  RTS ; .END