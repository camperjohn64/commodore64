UPSPE ASL A ; UPDATE TARGET SPEED ASL A ASL A TAX LDY #0;STAP LDA NUMBER,X STA BASE+$1E00+TARSNM-ORG,Y INX INY CPY #8 BNE STAP; RTS;UPLEV LDA LEVNUM ; UPDATE LEVEL AND #$F0 ; FIRST DIGIT... LSR A ; A/16*8 TAX LDY #0;STAP2 LDA NUMBER,X STA BASE+$1E00+LEVENM-ORG,Y INX INY CPY #8 BNE STAP2; LDA LEVNUM ; SECOND DIGIT... AND #$0F ASL A ; A*8 ASL A ASL A TAX LDY #0;STAP5 LDA NUMBER,X STA BASE+$1E00+LEVENM-ORG+8,Y INX INY CPY #8 BNE STAP5; RTS;UPLAYR LDA PLAYER ; UPDATE PLAYER ASL A ASL A ASL A TAX LDY #0;STAP3 LDA NUMBER+8,X ; +8 'CAUSE PLAYER 0, ACTUALLY 1 STA BASE+$1E00+PLAYNM-ORG,Y INX INY CPY #8 BNE STAP3; RTS;UPSCOR LDX #8-1 ; NUMBER OF DIGITS;DONXNM LDY INDXRS,X LDA SCORE,Y AND ANDSX,X LDY BITSX,X BEQ NSHITF LSR A LSR A LSR A LSR A;NSHITF ASL A ASL A ASL A TAY TXA ASL A ASL A ASL A TAX;STAP4 LDA NUMBER,Y STA BASE+$1E00+SCORNM-ORG,X INX INY TYA AND #7 BNE STAP4; TXA LSR A LSR A LSR A TAX DEX DEX BPL DONXNM; INX ; X=0 STX UPDATE;CHKAGN LDA SCORE+2 ; CHECK FOR EXTRA CITY AND #$FE CMP EXFLG BEQ NEXMAN INC EXCITY SED LDA EXFLG CLC ADC #2 STA EXFLG CLD JMP CHKAGN ; CHECK AGAIN IN RARE! CASES;NEXMAN RTS;INDXRS .BYTE 3,3,2,2,1,1,0,0ANDSX .BYTE $F0,$0F,$F0,$0F,$F0,$0F,$F0,$0FBITSX .BYTE 1,0,1,0,1,0,1,0; .FILE SOUNDS