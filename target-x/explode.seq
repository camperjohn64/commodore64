;********************;*                  *;* RECORD EXPLOSION *;*                  *;********************;EXPLOD LDX NXTEXP LDA X1 STA EXPX,X LDA Y1 STA EXPY,X LDA #1 STA EXPO,X LDA #26 STA EXPTIM,X INC NXTEXP INC EXPNX;EXPSND LDA #0 ; CLEAR SOUND STA SOUND2+4 LDA #$FF STA STABX; LDY #6;EXPSOU LDA STABX,Y STA SOUND2,Y DEY BPL EXPSOU; RTS;STABX .BYTE $FF,1,0,0,$81,$2A,0;;*******************;*                 *;* EXPLODE CLOUD X *;*                 *;*******************;DOEXP LDX CUREXP LDY EXPO,X ; GET CURRENT FRAME BEQ ERET CPY #6 BCC NF7 LDA EXCNT CMP #1 BEQ NF6;NF7 CPY #5 BNE NF5; DEC EXPTIM,X ; DEC TIMER FOR MID FRAME BNE ERET;NF5 LDA EXPX,X ; FIND X1 SEC SBC EXPXS,Y ; CONSIDER OFFSET STA X3 LDA EXPY,X SEC SBC EXPYS,Y STA Y3 LDA EXPL,Y ; FIND FRAME STA OBJECT LDA EXPH,Y STA OBJECT+1 CPY #8 ; LAST FRAME? BEQ LASTF INC EXPO,X INC CUREXP SEC JMP PUTOBJ ; PUT CLOUD ON...;LASTF LDA #0 STA EXPO,X INC CUREXP DEC EXPNX CLC JMP PUTOBJ;ERET INC CUREXP RTS;NF6 LDA EXPX,X ; REMOVE CLOUD IF TOO MANY SEC SBC #4 STA X3 LDA EXPY,X SEC SBC #7 STA Y3 LDA #<EXP4 STA OBJECT LDA #>EXP4 STA OBJECT+1 BNE LASTF; .FILE SATALIGHT